## 应用资源

> https://developer.android.com/guide/topics/resources/overview.html

#### 资源概览
为了提供与不同配置的兼容性，您必须使用各种按类型和配置对资源进行分组的子目录，对项目 res/ 目录中的资源加以组织。

对于任意类型的资源，您均可以为应用指定默认资源和多个备用资源：

* 默认资源系指无论设备配置如何，或者在没有备用资源与当前配置相匹配时，均应使用的资源。
* 备用资源系指设计用于特定配置的资源。 要指明某组资源适用于特定配置，请将相应的配置限定符追加到目录名称。

##### 提供资源

###### 分组资源类型

项目 res/ 目录内支持的资源目录：(表1)

| 目录        | 资源类型                                     |
| --------- | ---------------------------------------- |
| animator/ | 用于定义属性动画的 XML 文件                         |
| anim/     | 定义渐变动画的 XML 文件。（属性动画也可以保存在此目录中，但是为了区分这两种类型，属性动画首选 animator/ 目录。） |
| color/    | 用于定义颜色状态列表的 XML 文件                       |
| drawable/ | 位图文件（.png、.9.png、.jpg、.gif）或编译为以下可绘制对象资源子类型的XML文件：位图文件；九宫格（可调整大小的位图）；状态列表；形状；动画可绘制对象；其他可绘制对象 |
| mipmap/   | 适用于不同启动器图标密度的可绘制对象文件。                    |
| layout/   | 用于定义用户界面布局的 XML 文件                       |
| menu/     | 用于定义应用菜单（如选项菜单、上下文菜单或子菜单）的 XML 文件        |
| raw/      | 要以原始形式保存的任意文件。要使用原始InputStream打开这些资源，请使用资源ID(即 R.raw.filename)调用 `Resources.openRawResource()`。但是，如需访问原始文件名和文件层次结构，则可以考虑将某些资源保存在 assets/ 目录下(而不是 res/raw/）。assets/ 中的文件没有资源ID，因此您只能使用 `AssetManager` 读取这些文件。 |
| values/   | 包含字符串、整型数和颜色等简单值的XML文件。其他 res/ 子目录中的XML资源文件是根据 XML文件名定义单个资源，而 values/ 目录中的文件可描述多个资源。对于此目录中的文件，resources元素的每个子元素均定义一个资源。例如，string元素创建 R.string 资源,color元素创建 R.color 资源。由于每个资源均用其自己的 XML 元素定义，因此您可以根据自己的需要命名文件，并将不同的资源类型放在一个文件中。但是，为了清晰起见，您可能需要将独特的资源类型放在不同的文件中。 例如，对于可在此目录中创建的资源，下面给出了相应的文件名约定：arrays.xml，用于资源数组(类型化数组);colors.xml：颜色值;dimens.xml：尺寸值;strings.xml:字符串值;styles.xml:样式。 |
| xml/      | 可以在运行时通过调用 Resources.getXML() 读取的任意 XML 文件。各种 XML 配置文件（如可搜索配置）都必须保存在此处。 |

保存在表 1 中定义的子目录下的资源是“默认”资源。即，这些资源定义应用的默认设计和内容。

###### 提供备用资源

几乎每个应用都应提供备用资源以支持特定的设备配置。 在运行时，Android 会检测当前设备配置并为应用加载合适的资源。

 为一组资源指定特定于配置的备用资源：

1.在 res/ 中创建一个以 resources_name-config_qualifier形式命名的新目录。

 *  resources_name是相应默认资源的目录名称(如表1中所定义)

* qualifier是指定要使用这些资源的各个配置的名称(如表 2 中所定义)

* 您可以追加多个qualifier。以短划线将其分隔。

  > 追加多个限定符时，必须按照表2中列出的相同顺序放置它们。如果限定符的顺序错误，则该资源将被忽略。

2.将相应的备用资源保存在此新目录下。这些资源文件的名称必须与默认资源文件完全一样。

Android 支持若干配置限定符，您可以通过使用短划线分隔每个限定符，向一个目录名称添加多个限定符。表2按优先顺序列出了有效的配置限定符；如果对资源目录使用多个限定符，则必须按照表中列出的顺序将它们添加到目录名称。

配置限定符名称:

| 配置            | 限定符值                                     | 说明                                       |
| ------------- | ---------------------------------------- | ---------------------------------------- |
| MCC和MNC       | 示例:mcc310, mcc310-mnc004,mcc208-mnc00等等  | 移动国家代码 (MCC)，（可选）后跟设备 SIM 卡中的移动网络代码 (MNC)。例如，mcc310 是指美国的任一运营商，mcc310-mnc004 是指美国的 Verizon 公司，mcc208-mnc00 是指法国的 Orange 公司。 |
| 语言和区域         | 示例:en,fr,en_rUs等等                        | 语言通过由两个字母组成的ISO 639-1语言代码定义，可以选择后跟两个字母组成的 ISO 3166-1-alpha-2 区域码(前带小写字母“r”).这些代码不区分大小写；r 前缀用于区分区域码。 不能单独指定区域。 |
| 布局方向          | ldrtl, ldltr                             | 应用的布局方向。ldrtl 是指“布局方向从右到左”。ldltr 是指“布局方向从左到右”，这是默认的隐式值。它适用于布局、图片或值等任何资源。要为应用启用从右到左的布局功能，必须将 supportsRtl 设置为 "true"，并将 targetSdkVersion 设置为 17 或更高版本。此项为 API 级别 17 中新增配置。 |
| smallestWidth | sw\<N>dp:示例： sw320dp， sw600dp， sw720dp   | 屏幕的基本尺寸，由可用屏幕区域的最小尺寸指定。 具体来说，设备的 smallestWidth 是屏幕可用高度和宽度的最小尺寸（您也可以将其视为屏幕的“最小可能宽度”）。无论屏幕的当前方向如何，您均可使用此限定符确保应用 UI 的可用宽度至少为 Ndp。例如，如果布局要求屏幕区域的最小尺寸始终至少为 600dp，则可使用此限定符创建布局资源 res/layout-sw600dp/。仅当可用屏幕的最小尺寸至少为 600dp 时，系统才会使用这些资源，而不考虑 600dp 所代表的边是用户所认为的高度还是宽度。smallestWidth 是设备的固定屏幕尺寸特性；设备的 smallestWidth 不会随屏幕方向的变化而改变。应用为多个资源目录提供不同的 smallestWidth 限定符值时，系统会使用最接近（但未超出）设备 smallestWidth 的值。 |
| 可用宽度          | w\<N>dp,示例:w720dp, w1024dp等              | 指定资源应该使用的最小可用屏幕宽度，以dp为单位，由N值定义。在横向和纵向之间切换时，为了匹配当前实际宽度，此配置值也会随之发生变化。应用为多个资源目录提供不同的此配置值时，系统会使用最接近（但未超出）设备当前屏幕宽度的值。 此处的值考虑到了屏幕装饰元素，因此如果设备显示屏的左边缘或右边缘上有一些永久性 UI 元素，考虑到这些 UI 元素，它会使用小于实际屏幕尺寸的宽度值，这样会减少应用的可用空间。 |
| 可用高度          | h\<N>dp,示例:h720dp, h1024dp等              | 指定资源应该使用的最小可用屏幕高度，以“dp”为单位，由 \<N> 值定义。 在横向和纵向之间切换时，为了匹配当前实际高度，此配置值也会随之发生变化。应用为多个资源目录提供不同的此配置值时，系统会使用最接近（但未超出）设备当前屏幕高度的值。 此处的值考虑到了屏幕装饰元素，因此如果设备显示屏的上边缘或下边缘有一些永久性 UI 元素，考虑到这些 UI 元素，同时为减少应用的可用空间，它会使用小于实际屏幕尺寸的高度值。 非固定的屏幕装饰元素（例如，全屏时可隐藏的手机状态栏）并不在考虑范围内，标题栏或操作栏等窗口装饰也不在考虑范围内，因此应用必须准备好处理稍小于其所指定值的空间。此项为 API 级别 13 中新增配置。 |
| 屏幕尺寸          | small, normal, large, xlarge             | `small`：尺寸类似于低密度 QVGA 屏幕的屏幕。小屏幕的最小布局尺寸约为 320x426 dp 单位。例如，QVGA 低密度屏幕和 VGA 高密度屏幕。   `normal`：尺寸类似于中等密度 HVGA 屏幕的屏幕。标准屏幕的最小布局尺寸约为 320x470 dp 单位。例如，WQVGA 低密度屏幕、HVGA 中等密度屏幕、WVGA 高密度屏幕。   `large`：尺寸类似于中等密度 VGA 屏幕的屏幕。 大屏幕的最小布局尺寸约为 480x640 dp 单位。 例如，VGA 和 WVGA 中等密度屏幕。xlarge：明显大于传统中等密度 HVGA 屏幕的屏幕。超大屏幕的最小布局尺寸约为 720x960 dp 单位。在大多数情况下，屏幕超大的设备体积过大，不能放进口袋，最常见的是平板式设备。 API 级别 9 中的新增配置。 使用尺寸限定符并不表示资源仅**适用于该尺寸的屏幕。 如果没有为备用资源提供最符合当前设备配置的限定符，则系统可能使用其中[最匹配](https://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch)的资源。如果所有资源均使用大于当前屏幕的尺寸限定符，则系统不会使用这些资源，并且应用在运行时将会崩溃（例如，如果所有布局资源均用 xlarge 限定符标记，但设备是标准尺寸的屏幕）。此项为 API 级别 4 中新增配置。 |
| 屏幕纵横比         | long,notlong                             | long：宽屏，如 WQVGA、WVGA、FWVGA,notlong：非宽屏，如 QVGA、HVGA 和 VGA,此项为 API 级别 4 中新增配置。它完全基于屏幕的纵横比（宽屏较宽），而与屏幕方向无关。 |
| 圆形屏幕          | round,notround                           | round：圆形屏幕，例如圆形可穿戴式设备;notround：方形屏幕，例如手机或平板电脑;此项为 API 级别 23 中新增配置。 |
| 屏幕方向          | port,land                                | port：设备处于纵向（垂直）,land：设备处于横向（水平）          |
| UI 模式         | car,desk, television, appliance,watch    | car：设备正在车载手机座上显示,desk：设备正在桌面手机座上显示,television：设备正在电视上显示，为用户提供“十英尺”体验，其 UI 位于远离用户的大屏幕上，主要面向方向键或其他非指针式交互,appliance：设备用作不带显示屏的装置,watch：设备配有显示屏，戴在手腕上,此项为 API 级别 8 中新增配置，API 13 中新增电视配置，API 20 中新增手表配置。 |
| 夜间模式          | night,notnight                           | night：夜间,notnight：白天,此项为 API 级别 8 中新增配置。 如果夜间模式停留在自动模式（默认），它有可能在应用生命周期中发生改变。在这种情况下，该模式会根据当天的时间进行调整。 可以使用 `UiModeManager` 启用或禁用此模式。 |
| 屏幕像素密度dpi     | ldpi,mdpi,hdpi,xhdpi,xxhdpi,xxxhdpi,nodpi,tvdpi,anydpi | ldpi：低密度屏幕；约为 120dpi。mdpi：中等密度（传统 HVGA）屏幕；约为 160dpi。hdpi：高密度屏幕；约为 240dpi。xhdpi：超高密度屏幕；约为 320dpi。此项为 API 级别 8 中新增配置,xxhdpi：超超高密度屏幕；约为 480dpi。此项为 API 级别 16 中新增配置,xxxhdpi：超超超高密度屏幕使用（仅限启动器图标，请参阅“支持多种屏幕”中的注释）；约为 640dpi。 此项为 API 级别 18 中新增配置,nodpi：它可用于您不希望缩放以匹配设备密度的位图资源。tvdpi：密度介于 mdpi 和 hdpi 之间的屏幕；约为 213dpi。它并不是“主要”密度组， 主要用于电视，而大多数应用都不需要它。对于大多数应用而言，提供 mdpi 和 hdpi 资源便已足够，系统将根据需要对其进行缩放。此项为 API 级别 13 中新增配置,anydpi：此限定符适合所有屏幕密度，其优先级高于其他限定符。 这对于矢量可绘制对象很有用。 此项为 API 级别 21 中新增配置,六个主要密度之间的缩放比为 3:4:6:8:12:16（忽略 tvdpi 密度）。因此，9x9 (ldpi) 位图相当于 12x12 (mdpi)、18x18 (hdpi)、24x24 (xhdpi) 位图，依此类推。如果您认为图像资源在电视或其他某些设备上呈现的效果不够好，而想尝试使用 tvdpi 资源，则缩放比例为 1.33*mdpi。例如，mdpi 屏幕的 100px x 100px 图像应该相当于 tvdpi 的133px x 133px。使用密度限定符并不表示资源仅适用于该密度的屏幕。 如果没有为备用资源提供最符合当前设备配置的限定符，则系统可能使用其中最匹配的资源。 |
| 触摸屏类型         | notouch,finger                           | notouch：设备没有触摸屏。finger：设备有一个专供用户通过手指直接与其交互的触摸屏。 |
| 键盘可用性         | keysexposed,keyshidden,keyssoft          | keysexposed：设备具有可用的键盘。如果设备启用了软键盘（不无可能），那么即使硬键盘没有展示给用户，哪怕设备没有硬键盘，也可以使用此限定符。 如果没有提供或已经禁用软键盘，则只有在显示硬键盘时才会使用此限定符。keyshidden：设备具有可用的硬键盘，但它处于隐藏状态，且设备没有启用软键盘。keyssoft：设备已经启用软键盘（无论是否可见）。如果提供了 keysexposed 资源，但未提供 keyssoft 资源，那么只要系统已经启用软键盘，就会使用 keysexposed 资源，而不考虑键盘是否可见。 |
| 主要文本输入法       | nokeys,qwerty,12key                      | nokeys：设备没有用于文本输入的硬按键。qwerty：设备具有标准硬键盘（无论是否对用户可见）。12key：设备具有 12 键硬键盘（无论是否对用户可见）。 |
| 导航键可用性        | navexposed,navhidden                     | navexposed：导航键可供用户使用。navhidden：导航键不可用（例如，位于密封盖子后面）。 |
| 主要非触摸导航方法     | nonav,dpad,trackball,wheel               | nonav：除了使用触摸屏以外，设备没有其他导航设施。dpad：设备具有用于导航的方向键。trackball：设备具有用于导航的轨迹球。wheel：设备具有用于导航的方向盘（不常见）。 |
| 平台版本（API 级别）  | 示例：v3,v4,v7等                             | 设备支持的 API 级别。例如，v1 对应于 API 级别 1（带有 Android 1.0 或更高版本系统的设备），v4 对应于 API 级别 4（带有 Android 1.6 或更高版本系统的设备）。 |

有些配置限定符是从 Android 1.0 才开始添加，因此并非所有版本的 Android 系统都支持所有限定符。使用新限定符会隐式添加平台版本限定符，因此较旧版本系统的设备必然会忽略它。 例如，使用 w600dp 限定符会自动包括 v13 限定符，因为可用宽度限定符是 API 级别 13 中的新增配置。为了避免出现任何问题，请始终包含一组默认资源（一组“不带限定符”的资源）。

###### 限定符命名规则

以下是一些关于使用配置限定符名称的规则：

* 您可以为单组资源指定多个限定符，并使用短划线分隔。例如，drawable-en-rUS-land 适用于横排美国英语设备
* 这些限定符必须遵循表 2 中列出的顺序。例如：错误：drawable-hdpi-port/；正确：`drawable-port-hdpi/`
* 不能嵌套备用资源目录。例如，您不能拥有 res/drawable/drawable-en
* 值不区分大小写。
* 对于每种限定符类型，仅支持一个值。例如，若要对西班牙语和法语使用相同的可绘制对象文件，则您肯定不能拥有名为 drawable-rES-rFR/ 的目录，而是需要两个包含相应文件的资源目录，如 drawable-rES/ 和 drawable-rFR/。

###### 创建别名资源

如果您想将某一资源用于多种设备配置（但是不想作为默认资源提供），则无需将同一资源放入多个备用资源目录中。 相反，您可以（在某些情况下）创建备用资源，充当保存在默认资源目录下的资源的别名。

> 注：并非所有资源都会提供相应机制让您创建指向其他资源的别名。 特别是，xml/ 目录中的动画资源、菜单资源、原始资源以及其他未指定资源均不提供此功能。

例如，假设您有一个应用图标 icon.png，并且需要不同语言区域的独特版本。 但是，加拿大英语和加拿大法语这两种语言区域需要使用同一版本。 您可能会认为需要将相同的图像复制到加拿大英语和加拿大法语对应的资源目录中，但事实并非如此。 相反，您可以将用于二者的图像另存为 icon_ca.png（除 icon.png 以外的任何名称），并将其放入默认 res/drawable/ 目录中。然后，在 res/drawable-en-rCA/ 和 res/drawable-fr-rCA/ 中创建 icon.xml 文件，使用 <bitmap> 元素引用 icon_ca.png 资源。这样，您只需存储 PNG 文件的一个版本和两个指向该版本的小型 XML 文件。（XML 文件示例如下。）

###### # 可绘制对象

要创建指向现有可绘制对象的别名，请使用 <bitmap> 元素。例如：

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/icon_ca" />
 
 //如果将此文件另存为 icon.xml（例如，在备用资源目录中，另存为 res/drawable-en-rCA/），则会编译到可作为 R.drawable.icon 引用的资源中，但实际上它是 R.drawable.icon_ca 资源（保存在 res/drawable/ 中）的别名。
```

###### # 布局

要创建指向现有布局的别名，请使用包装在 <merge> 中的 <include> 元素。例如：

```
//如果将此文件另存为 main.xml，则会编译到可作为 R.layout.main 引用的资源中，但实际上它是 R.layout.main_ltr 资源的别名
<?xml version="1.0" encoding="utf-8"?>
<merge>
    <include layout="@layout/main_ltr"/>
</merge>
```

###### # 字符串和其他简单值

```
//R.string.hi 资源现在是 R.string.hello 的别名。
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="hello">Hello</string>
    <string name="hi">@string/hello</string>
</resources>

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="red">#f00</color>
    <color name="highlight">@color/red</color>
</resources>

```

